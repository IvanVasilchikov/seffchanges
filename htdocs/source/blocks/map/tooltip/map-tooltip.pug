include ../../card/gallery/card-gallery.pug
include ../../core/btn/btn.pug

mixin map-tooltip(info)
  .map-tooltip
    .map-tooltip__wrp
      .map-tooltip__close
        svg
          use(xlink:href=loadAssets('./svg/close.svg'))
      .map-tooltip__gallery-wrp(@click='openLink')
        +card-gallery(info.images, 'map-tooltip__gallery', 'map-tooltip__pagination', true)
        if (info.deal_type)
          .map-tooltip__label.map-tooltip__label-deal!= info.deal_type
        else
          | <!---->
        if (info.id)
          .map-tooltip__id ID: #{info.id}
        else
          | <!---->
      .card-small
        a.card-small__link(href=info.link, target='_blank')
        .card-small__main
          .card-small__content
            .card-small__title!= info.title
            button.card-small__favorite(class=(info.isFav ? 'card-small__favorite--added' : ''), @click='toggleFav()')
              if (info.isFav)
                svg
                  use(xlink:href=loadAssets('./svg/close.svg'))
              else
                svg
                  use(xlink:href=loadAssets('./svg/like.svg'))
            if (info.name)
              .card-small__text.card-small__text--gray!= info.name
            else
              | <!---->
            if (info.address)
              .card-small__text.card-small__text--gray!= info.address
            else
              | <!---->
            if (info.specs)
              .card-small__specs(class='card-small__specs--' + info.card_type)
                each text, spec in info.info
                  .card-small__specs-item(class='card-small__specs-item--' + spec)
                    if spec === 'ring'
                      svg(height='17', width='17')
                        use(xlink:href=loadAssets('./svg/ring.svg'))
                    if spec === 'square'
                      svg(height='14', width='17')
                        use(xlink:href=loadAssets('./svg/ruller.svg'))
                    if spec === 'date'
                      svg(height='14', width='14')
                        use(xlink:href=loadAssets('./svg/calendar.svg'))
                    if spec === 'facing'
                      svg(height='14', width='14')
                        use(xlink:href=loadAssets('./svg/facing.svg'))
                    if spec === 'area'
                      svg(height='14', width='15')
                        use(xlink:href=loadAssets('./svg/fences.svg'))
                    if spec === 'rooms'
                      svg(height='14', width='17')
                        use(xlink:href=loadAssets('./svg/room.svg'))
                    if spec === 'bedrooms'
                      svg(height='14', width='17')
                        use(xlink:href=loadAssets('./svg/bed.svg'))
                    if spec === 'floor'
                      svg(height='14', width='14')
                        use(xlink:href=loadAssets('./svg/apartment.svg'))
                    if spec === 'metro'
                      svg(height='18', width='16')
                        use(xlink:href=loadAssets('./svg/bus.svg'))
                    if spec === 'forest'
                      svg(height='17', width='17')
                        use(xlink:href=loadAssets('./svg/trees.svg'))
                    if spec === 'water'
                      svg(height='17', width='17')
                        use(xlink:href=loadAssets('./svg/waves.svg'))
                    if spec === 'parking'
                      svg(height='17', width='17')
                        use(xlink:href=loadAssets('./svg/parking.svg'))
                    if spec === 'distance'
                      svg(height='15', width='16')
                        use(xlink:href=loadAssets('./svg/route.svg'))
                    if spec === 'gas'
                      svg(height='15', width='16')
                        use(xlink:href=loadAssets('./svg/gas.svg'))
                    if spec === 'cleaner'
                      svg(height='15', width='17')
                        use(xlink:href=loadAssets('./svg/septik.svg'))
                    if spec === 'pump'
                      svg(height='16', width='16')
                        use(xlink:href=loadAssets('./svg/pumpjack.svg'))
                    if spec === 'sewage'
                      svg(height='17', width='16')
                        use(xlink:href=loadAssets('./svg/kanaliz.svg'))
                    if spec === 'class'
                      svg(height='13', width='13')
                        use(xlink:href=loadAssets('./svg/class.svg'))
                    if spec === 'metro'
                      .card-small__specs-item-text
                        span!= text.station
                        if (text.walk)
                          span!= ', ' + text.walk
                        else
                          | <!---->
                    else
                      .card-small__specs-item-text!= text
            else
              | <!---->
          if (info.price)
            .card-small__price!= (info.price.request ? 'По запросу' : info.price.total)
          else
            | <!---->
          if (info.allObjects)
            a.card-small__all-objects(href=info.allObjects.url)!= info.allObjects.text
          else
            | <!---->
